{"version":3,"sources":["webpack:///./src/app/search/search.component.css","webpack:///./src/app/search/search.component.html","webpack:///./src/app/search/search.component.ts","webpack:///./src/app/search/search.module.ts","webpack:///./src/app/search/search.routes.ts","webpack:///./src/app/search/shared/models/searchType.enum.ts","webpack:///./src/app/search/shared/services/search.service.ts","webpack:///./src/app/search/shared/store/search.effect.ts"],"names":[],"mappings":"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","file":"app-search-search-module.js","sourcesContent":["module.exports = \".btn-search{\\n    background-color: white;\\n    border: 2px solid rgba(0,0,0,.1);;\\n\\n}\"","module.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12 col-md-4\\\">\\n      <div class=\\\"container container-white\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-12\\\">\\n            <span class=\\\"float-right\\\">\\n              <app-modal-ajout [idReason]=\\\"'ajoutEcole'\\\" [title]=\\\"'Ajouter une école ?' \\\" (pickedEvent)=\\\"ajouterEcole($event)\\\">\\n              </app-modal-ajout>\\n            </span>\\n            <h3 class=\\\"text-center mt-1\\\">Ecoles</h3>\\n            <hr>\\n          </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-12\\\" style=\\\"max-height: 60vh; overflow-y : scroll\\\">\\n            <button (click)=\\\"selectEcole(ecole)\\\" *ngFor=\\\"let ecole of (ecoles$ | async)\\\" type=\\\"button\\\" class=\\\"btn btn-search waves-effect col-12 mt-2\\\">\\n              {{ ecole.wording }}\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"col-12 col-md-4\\\">\\n      <div class=\\\"container container-white\\\" >\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-12\\\">\\n\\n            <span class=\\\"float-right\\\">\\n              <app-modal-ajout [idReason]=\\\"'ajoutSection'\\\" [title]=\\\"'Ajouter une section ?'\\\" (pickedEvent)=\\\"ajouterSpecialite($event)\\\">\\n              </app-modal-ajout>\\n            </span>\\n            <h3 class=\\\"text-center mt-1\\\">Section</h3>\\n            <hr>\\n            <div style=\\\"color: red\\\"> {{erreurDroitSection}}</div>\\n          </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-12\\\" style=\\\"max-height: 60vh; overflow-y : scroll\\\" >\\n            <button (click)=\\\"selectSpecialite(spe)\\\" *ngFor=\\\"let spe of (specialites$ | async)\\\" type=\\\"button\\\" class=\\\"btn btn-search waves-effect col-12 mt-2\\\">\\n              {{ spe.wording }}\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"col-12 col-md-4\\\">\\n      <div class=\\\"container container-white\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-12\\\">\\n            <span class=\\\"float-right\\\">\\n                <app-modal-ajout [idReason]=\\\"'ajoutMatiere'\\\" [title]=\\\"'Ajouter une matière ?' \\\" (pickedEvent)=\\\"ajouterMatiere($event)\\\" *ngIf=\\\"possedeDroit('Ajouter')\\\">\\n                </app-modal-ajout>\\n              </span>\\n            <h3 class=\\\"text-center mt-1\\\">Matière</h3>\\n            <hr>\\n          </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-12\\\" style=\\\"max-height: 60vh; overflow-y : scroll\\\">\\n            <button (click)=\\\"selectMatiere(matiere)\\\" *ngFor=\\\"let matiere of (matieres$ | async)\\\" type=\\\"button\\\" class=\\\"btn btn-search waves-effect col-12 mt-2\\\">\\n              {{ matiere.wording }}\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\"","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { searchPossibility } from './shared/models/searchPossibility.model';\nimport { Store, select } from '@ngrx/store';\nimport { State } from '../shared/store';\nimport { \n  AddEcole,\n  AddSpecialite,\n  AddMatiere,\n  FetchEcoles,\n  SetEcoleSelected,\n  FetchSpecialites,\n  SetSpecialiteSelected,\n  FetchMatieres,\n  SetMatiereSelected,\n  FetchDroit} from './shared/store/search.actions';\nimport { searchType } from './shared/models/searchType.enum';\nimport { Router } from '@angular/router';\nimport { getEcoleSelectedSelector, getEcolesSelector, getSpecialitesSelector, getMatieresSelector, getDroitsSpeSelectedSelector } from './shared/store/search.selectors';\nimport { Droit } from '../monitoring/shared/models/droit.model';\nimport { map } from 'rxjs/operators';\n\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.css']\n})\nexport class SearchComponent implements OnInit {\n  public ecoles$ : Observable<searchPossibility[]>;\n  public specialites$ : Observable<searchPossibility[]>;\n  public matieres$ : Observable<searchPossibility[]>;\n  public droitsUser$ : Observable<Droit[]>;\n  public droitUser : Droit[];\n\n  public erreurDroitSection : string;\n  \n  ngOnInit() {\n    this.store.dispatch(new FetchEcoles());\n    this.ecoles$ = this.store.pipe(select (getEcolesSelector));\n    \n    // Récupération des droits du user\n    this.droitsUser$ = this.store.pipe(select(getDroitsSpeSelectedSelector));\n    this.droitsUser$.subscribe( (droits : Droit[]) => {\n      this.droitUser = droits;\n    })\n  }\n\n  constructor( private store: Store<State>, private router: Router) {\n  }\n\n  public selectEcole(ecole : searchPossibility): void {\n    this.store.dispatch(new SetEcoleSelected(ecole));\n    this.store.dispatch(new FetchSpecialites());\n    this.specialites$ = this.store.pipe(select(getSpecialitesSelector));\n    \n  }\n\n  public selectSpecialite(spe : searchPossibility): void {\n    // Demande les matiere associé à la spé et les droits afin d'afficher ou non le bouton ajouter\n    this.store.dispatch(new SetSpecialiteSelected(spe));\n    this.store.dispatch(new FetchDroit());\n    this.store.dispatch(new FetchMatieres());\n    this.matieres$ = this.store.pipe(select(getMatieresSelector));\n  }\n\n  public selectMatiere(matiere : searchPossibility): void {\n    this.store.dispatch(new SetMatiereSelected(matiere));\n    this.router.navigateByUrl('/matiere');\n  }\n\n  public ajouterEcole (nomEcole : string) {\n    this.store.dispatch(new AddEcole(nomEcole));\n    \n  }\n\n  public ajouterSpecialite (nomSpe : string) {\n    this.store.dispatch(new AddSpecialite(nomSpe));\n  }\n\n  public ajouterMatiere (nomMatiere : string) {\n    this.store.dispatch(new AddMatiere(nomMatiere));\n  }\n\n  public possedeDroit(nomDroit : string) : boolean {\n    let possedeDroit = false;\n    if (this.droitUser) {\n      this.droitUser.forEach((droit : Droit) => {\n        if ( droit.intitule === nomDroit ) {\n          possedeDroit = droit.estAcquis;\n        }\n    });\n    }\n   \n    return possedeDroit;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { SearchComponent } from './search.component';\nimport { SEARCH_ROUTES } from './search.routes';\nimport { LayoutModule } from '../shared/modules/layout.module';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\nimport { SearchEffects } from './shared/store/search.effect';\nimport { SearchReducer } from './shared/store/search.reducers';\nimport { FormsModule } from '@angular/forms';\nimport { CoreModule } from '../shared/modules/core.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CoreModule,\n    RouterModule.forChild(SEARCH_ROUTES), \n    StoreModule.forFeature('search', SearchReducer),\n    EffectsModule.forFeature([SearchEffects]),\n    FormsModule\n  ],\n  declarations: [\n    SearchComponent\n  ]\n})\nexport class SearchModule { }\n\n\n","import { Component } from '@angular/core';\nimport { Routes } from '@angular/router';\nimport { SearchComponent } from './search.component';\n\n\n// Routes marche avec un s à la fin ou simplement un tableau \nexport const SEARCH_ROUTES : Routes = [\n    { \n        path: '', \n        component: SearchComponent\n    }\n\n]","export enum searchType {\n    MATIERE = \"Matiere\",\n    ECOLE = \"Ecole\",\n    SPECIALITE= \"Specialite\"\n}","import { Injectable } from '@angular/core';\nimport { fromPromise } from 'rxjs/observable/fromPromise';\nimport { map } from 'rxjs/operators';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { searchPossibility } from '../models/searchPossibility.model';\nimport { searchType } from '../models/searchType.enum'; \nimport { Droit } from '../../../monitoring/shared/models/droit.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SearchService {\n    \n  constructor(public http : HttpClient) {}\n  \n  public getSpecialites(idEcole : number): Observable<searchPossibility[]> {\n    return this.http.post<searchPossibility[]>(\"/api/search/getSpecialites\", {idEcole : idEcole}).pipe(\n      map ((sPos : any) => {\n        return sPos.map (r => ({id : r.idSpecialite, wording : r.nom , type : searchType.SPECIALITE}));\n      })\n    );;\n  }\n\n  public getMatieres (idSpe : number): Observable<searchPossibility[]> {\n    return this.http.get<searchPossibility[]>(\"/api/search/getMatieres/\" + idSpe).pipe(\n      map ((sPos : any) => {\n        if (!sPos.err) {\n          return sPos.map (r => ({id : r.idMatiere, wording : r.Libelle, type : searchType.MATIERE}));\n        } else {\n          return null;\n        }\n        \n      })\n    );;\n  }\n\n  public getEcoles(): Observable<searchPossibility[]> {\n    return this.http.get<searchPossibility[]>(\"/api/search/getEcoles\").pipe(\n      map ((sPos : any) => {\n        return sPos.map (r => ({id : r.idEcole, wording : r.nom  , type : searchType.ECOLE}));\n      })\n    );\n  }\n\n  public addEcole(nomEcole : string): Observable<any>{\n    return this.http.post<any>(\"/api/search/addEcole\", {nomEcole : nomEcole});\n  }\n\n  public addSpecialite(nomSpe: string, idEcole : number): Observable<any>{\n    return this.http.post<any>(\"/api/search/addSpecialite\", {nomSpe : nomSpe,  idEcole: idEcole});\n  }\n\n  public addMatiere(nomMatiere : string, idSpecialite : number): Observable<any>{\n    return this.http.post<any>(\"/api/search/addMatiere\", {nomMatiere : nomMatiere, idSpecialite : idSpecialite});\n  }\n\n  public getDroitUserSpeSelected(idSpe: number):Observable<Droit[]> {\n    return this.http.get<Droit[]>(\"/api/monitoring/getDroitUserSpe/\" + idSpe).pipe(\n      map ((sPos : any) => {\n        return sPos.map (r => ({idDroit : r.idDroit, estAcquis: r.estAcquis, intitule: r.intitule}));\n      })\n    );\n  }\n\n}\n","import { Injectable } from \"@angular/core\";\nimport { Action, Store, select} from  \"@ngrx/store\";\nimport { State } from \"../../../shared/store\";\nimport { switchMap, tap, debounceTime, map, withLatestFrom } from \"rxjs/operators\";\nimport { ofType, Effect, Actions } from \"@ngrx/effects\";\nimport { SearchAction,\n    ADD_ECOLE,\n    ADD_MATIERE,\n    ADD_SPECIALITE,\n    AddEcole,\n    AddMatiere,\n    AddSpecialite,\n    FETCH_ECOLES,\n    FetchEcolesSuccess,\n    FETCH_SPECIALITES,\n    FETCH_MATIERES,\n    FetchMatieresSuccess,\n    FetchEcoles,\n    FetchMatieres,\n    FetchSpecialites,\n    FetchSpecialitesSuccess,\n    FETCH_DROIT,\n    FetchDroitSuccess,\n    FetchDroit,\n    SET_SPECIALITE_SELECTED\n} from './search.actions';\nimport { SearchService } from \"../services/search.service\";\nimport { searchPossibility } from '../models/searchPossibility.model';\nimport { searchType } from \"../models/searchType.enum\";\nimport { getMatiereSelectedSelector, getEcoleSelectedSelector, getSpecialiteSelectedSelector } from \"./search.selectors\";\nimport { Droit } from \"../../../monitoring/shared/models/droit.model\";\n\n\n@Injectable()\nexport class SearchEffects {\n    \n    @Effect()\n    fetchEcoles$ = this.action$.pipe(\n        ofType(FETCH_ECOLES),\n        switchMap ((search: searchPossibility) => {\n            return this.searchService.getEcoles();\n        }),\n        map( (response: searchPossibility[]) => {\n            return new FetchEcolesSuccess(response);\n        })\n    )\n\n    @Effect()\n    fetchSpecialites$ = this.action$.pipe(\n        ofType(FETCH_SPECIALITES),\n        withLatestFrom(this.store.pipe(select(getEcoleSelectedSelector))),\n        switchMap (([action, ecole]  : [FetchSpecialites, searchPossibility]) => {\n            return this.searchService.getSpecialites(ecole.id);\n        }),\n        map( (response: searchPossibility[]) => {\n            return new FetchSpecialitesSuccess(response)\n        })\n    )\n\n    @Effect()\n    fetchMatieres$ = this.action$.pipe(\n        ofType(FETCH_MATIERES),\n        withLatestFrom(this.store.pipe(select(getSpecialiteSelectedSelector))),\n        switchMap (([action, spe]  : [FetchSpecialites, searchPossibility]) => {\n            return this.searchService.getMatieres(spe.id);\n        }),\n        map( (response: searchPossibility[]) => {\n            return new FetchMatieresSuccess(response);\n        })\n    )\n\n\n    @Effect()\n    addEcole$ = this.action$.pipe(\n        ofType(ADD_ECOLE),\n        switchMap ((action : AddEcole) => {\n            return this.searchService.addEcole(action.payload);\n        }), \n        map( () => {\n            return new FetchEcoles();\n        })\n    )\n\n    @Effect()\n    addMatiere$ = this.action$.pipe(\n        ofType(ADD_MATIERE),\n        withLatestFrom(this.store.pipe(select(getSpecialiteSelectedSelector))),\n        switchMap (([action, ecole]  : [AddMatiere, searchPossibility])=> {\n            return this.searchService.addMatiere(action.payload, ecole.id);\n        }),\n        map ( () => {\n            return new FetchMatieres();\n        })\n    )\n\n    @Effect()\n    addSpecialite$ = this.action$.pipe(\n        ofType(ADD_SPECIALITE),\n        withLatestFrom(this.store.pipe(select(getEcoleSelectedSelector))),\n        switchMap (([action, matiere]  : [AddSpecialite, searchPossibility]) => {\n            return this.searchService.addSpecialite(action.payload, matiere.id);\n        }),\n        map ( () => {\n            return new FetchSpecialites();\n        })\n    )\n\n    @Effect()\n    fetchDroit$ = this.action$.pipe(\n        ofType(FETCH_DROIT),\n        withLatestFrom(this.store.pipe(select(getSpecialiteSelectedSelector))),\n        switchMap( ([action, spe] : [Action, searchPossibility]) => {\n            return this.searchService.getDroitUserSpeSelected(spe.id);\n        }),\n        map( (droit: Droit[]) => {\n            \n            return new FetchDroitSuccess(droit);\n        })\n    )\n\n    constructor (private action$: Actions, \n        private store: Store<State>,\n        private searchService: SearchService) {}\n}"],"sourceRoot":""}